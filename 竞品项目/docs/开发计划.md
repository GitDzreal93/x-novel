# 📅 开发计划 - X-Novel AI 小说创作平台

## 🎯 开发原则

1. **先复刻再超越** - 确保竞品功能 1:1 实现
2. **最小可行产品** - 每个阶段都有可用的交付物
3. **渐进式开发** - 从核心到外围，从必需到增强
4. **前后端并行** - 接口优先，便于联调

---

## 📊 功能优先级总览

```
┌─────────────────────────────────────────────────────────────┐
│                    功能优先级金字塔                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                        ▲                                    │
│                      P0 核心功能                            │
│              (MVP - 最小可行产品)                          │
│        项目管理 + 架构生成 + 大纲生成 + 写作 + 导出            │
│                                                             │
│                      ▲                                      │
│                   P1 重要功能                              │
│            (基础体验完善)                                │
│      关系图谱 + 设置管理 + 错误检测 + 用户系统                    │
│                                                             │
│                    ▲                                        │
│                 P2 增强功能                                │
│           (差异化竞争)                                   │
│   智能对话 + 写作助手 + AI 审阅 + 多平台发布                     │
│                                                             │
│                  ▲                                          │
│              P3 高级功能                                  │
│        (锦上添花)                                         │
│  推广内容生成 + 数据分析 + 协作功能                             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 🎬 第一阶段：MVP（最小可行产品）

**目标**：实现竞品核心功能，完成基本写作流程

### 预估时间：4-6 周

#### Sprint 1: 基础框架 + 项目管理（第 1 周）

**后端任务**
- [ ] Go 项目初始化
  - [ ] 目录结构搭建
  - [ ] Gin 框架配置
  - [ ] 数据库连接（GORM + PostgreSQL）
  - [ ] 配置管理（Viper）
  - [ ] 日志系统（Zap）
- [ ] 数据库设计
  - [ ] 项目表、章节表
  - [ ] 迁移文件创建
- [ ] 设备标识管理
  - [ ] 本地设备 ID 生成
  - [ ] 设备数据隔离
- [ ] 项目 API
  - [ ] 创建项目
  - [ ] 列表查询
  - [ ] 详情查询
  - [ ] 更新项目
  - [ ] 删除项目

**前端任务**
- [ ] React 项目初始化（Vite + TS）
  - [ ] 目录结构搭建
  - [ ] Ant Design 配置
  - [ ] 路由配置（React Router）
  - [ ] 状态管理（Zustand）
- [ ] 基础布局
  - [ ] 主布局（Header + Sider）
  - [ ] 主题配置
  - [ ] 设备 ID 持久化
- [ ] 项目管理
  - [ ] 项目列表页
  - [ ] 项目卡片组件
  - [ ] 创建项目对话框
  - [ ] 项目详情页布局

**交付标准**：
- 可以创建新项目
- 可以看到项目列表
- 数据本地持久化

---

#### Sprint 2: 小说架构生成（第 2 周）

**后端任务**
- [ ] 模型配置管理
  - [ ] 模型配置表
  - [ ] CRUD 接口
  - [ ] 默认模型初始化
- [ ] LLM 适配器
  - [ ] 适配器接口定义
  - [ ] OpenAI 适配器实现
  - [ ] 流式响应处理
- [ ] 架构生成服务
  - [ ] 核心种子生成
  - [ ] 角色动力学生成
  - [ ] 世界观生成
  - [ ] 情节架构生成
  - [ ] 角色状态生成
- [ ] 架构 API
  - [ ] 生成架构接口
  - [ ] 查询架构接口
  - [ ] 更新架构接口

**前端任务**
- [ ] 模型配置页面
  - [ ] 模型列表
  - [ ] 添加/编辑模型
  - [ ] API Key 配置
- [ ] 架构面板
  - [ ] 折叠面板展示
  - [ ] 5 个架构模块编辑器
  - [ ] 生成按钮
  - [ ] 进度展示

**提示词模板**：
- [ ] architecture/coreSeed
- [ ] architecture/characterDynamics
- [ ] architecture/worldBuilding
- [ ] architecture/plotArchitecture
- [ ] architecture/characterState

**交付标准**：
- 可以配置 LLM API
- 可以生成完整的小说架构
- 生成的架构可以编辑

---

#### Sprint 3: 章节大纲生成（第 3 周）

**后端任务**
- [ ] 大纲生成服务
  - [ ] 一次性生成
  - [ ] 分块生成（token 限制）
  - [ ] 断点续传
- [ ] 大纲 API
  - [ ] 生成大纲接口
  - [ ] 查询大纲接口
  - [ ] 更新大纲接口
- [ ] 大纲解析工具
  - [ ] 章节信息解析
  - [ ] 结构化数据返回

**前端任务**
- [ ] 大纲面板
  - [ ] 章节列表展示
  - [ ] 章节信息卡片
  - [ ] 可编辑文本框
  - [ ] 生成按钮
  - [ ] 分块进度显示

**提示词模板**：
- [ ] chapter/blueprint
- [ ] chapter/blueprintChunked

**交付标准**：
- 可以生成完整的章节大纲
- 支持长篇分块生成
- 大纲可以编辑保存

---

#### Sprint 4: 章节写作（第 4 周）

**后端任务**
- [ ] 章节服务
  - [ ] 获取章节信息
  - [ ] 章节草稿生成
  - [ ] 章节定稿（更新摘要）
  - [ ] 章节扩写
- [ ] 章节 API
  - [ ] 章节列表接口
  - [ ] 单章详情接口
  - [ ] 创建/更新章节
  - [ ] 生成草稿接口
  - [ ] 定稿接口
  - [ ] 扩写接口

**前端任务**
- [ ] 章节写作面板
  - [ ] 章节列表侧边栏
  - [ ] 章节信息展示
  - [ ] 富文本编辑器集成
  - [ ] 字数统计
  - [ ] 生成草稿按钮
  - [ ] 保存/定稿按钮
  - [ ] 扩写按钮
  - [ ] 前文摘要展示

**提示词模板**：
- [ ] chapter/firstDraft
- [ ] chapter/nextDraft
- [ ] chapter/enrich
- [ ] utility/summary
- [ ] utility/updateCharacterState

**交付标准**：
- 可以逐章写作
- AI 生成章节内容
- 支持手动编辑
- 自动保存和定稿

---

#### Sprint 5: 导出功能（第 5 周）

**后端任务**
- [ ] 导出服务
  - [ ] TXT 格式生成
  - [ ] Markdown 格式生成
  - [ ] 文件下载接口
- [ ] 导出 API
  - [ ] 导出预览接口
  - [ ] 导出触发接口

**前端任务**
- [ ] 导出面板
  - [ ] 导出统计展示
  - [ ] 格式选择（TXT/MD）
  - [ ] 导出按钮
  - [ ] 下载处理

**交付标准**：
- 可以导出 TXT 格式
- 可以导出 Markdown 格式
- 导出内容完整

---

#### Sprint 6: 设置功能 + 基础优化（第 6 周）

**后端任务**
- [ ] 设置服务
  - [ ] 用户设置 CRUD
  - [ ] 主题设置
  - [ ] 偏好设置
- [ ] 设置 API
  - [ ] 获取设置接口
  - [ ] 更新设置接口

**前端任务**
- [ ] 设置页面
  - [ ] API 配置
  - [ ] 模型配置（复用）
  - [ ] 主题切换
  - [ ] 其他偏好设置
- [ ] 全局优化
  - [ ] 加载状态优化
  - [ ] 错误处理
  - [ ] Toast 提示

**交付标准**：
- 可以配置 API
- 可以切换模型
- 可以切换深色/浅色主题
- MVP 功能完整可用

---

## 🚀 第二阶段：基础体验完善

**目标**：补齐竞品剩余功能，提升基础体验

### 预估时间：3-4 周

#### Sprint 7: 关系图谱 - 灵感罗盘（第 7 周）

**后端任务**
- [ ] 图谱服务
  - [ ] 基线图谱生成
  - [ ] 章节快照生成
  - [ ] 图谱数据存储
- [ ] 图谱 API
  - [ ] 生成图谱接口
  - [ ] 查询图谱接口
  - [ ] 更新快照接口
  - [ ] 删除节点接口

**前端任务**
- [ ] 灵感罗盘面板
  - [ ] 工具栏
  - [ ] 图谱画布（ECharts Graph）
  - [ ] 时间轴
  - [ ] 节点详情侧边栏
  - [ ] 关系详情弹窗
  - [ ] 导出 PNG/HTML

**提示词模板**：
- [ ] compass/extractGraph
- [ ] compass/extractChapterDelta
- [ ] compass/extractChapterGraph

**交付标准**：
- 可以生成角色关系图谱
- 可以查看章节快照变化
- 可以导出图谱

---

#### Sprint 8: 错误检测系统（第 8 周）

**后端任务**
- [ ] 检测服务
  - [ ] 错别字检测
  - [ ] 语法病句检测
  - [ ] 逻辑一致性检测
  - [ ] 重复度检测
- [ ] 检测 API
  - [ ] 检测错误接口
  - [ ] 批量修正接口

**前端任务**
- [ ] 错误检测面板
  - [ ] 实时标记（波浪线）
  - [ ] 错误列表
  - [ ] 一键修正按钮
  - [ ] 检测报告

**工具函数**：
- [ ] 错别字库（常见错误）
- [ ] 相似度算法（编辑距离）
- [ ] 语法规则引擎

**交付标准**：
- 可以检测错别字
- 可以检测逻辑冲突
- 可以一键批量修正

---

#### Sprint 9: 性能优化 + 部署（第 9 周）

**后端任务**
- [ ] 性能优化
  - [ ] 数据库索引优化
  - [ ] 查询优化（N+1 问题）
  - [ ] 缓存策略（Redis）
- [ ] 部署准备
  - [ ] Docker 配置
  - [ ] Docker Compose
  - [ ] Nginx 配置

**前端任务**
- [ ] 性能优化
  - [ ] 代码分割
  - [ ] 懒加载
  - [ ] 虚拟滚动（长列表）
- [ ] 构建优化
  - [ ] 生产环境打包
  - [ ] CDN 配置

**交付标准**：
- 应用可以 Docker 部署
- 前端性能良好
- 基础监控就绪

---

## 💡 第三阶段：差异化竞争力

**目标**：实现超越竞品的核心功能

### 预估时间：4-5 周

#### Sprint 10: 智能对话激发灵感（第 10 周）

**后端任务**
- [ ] 聊天服务
  - [ ] 会话管理
  - [ ] 消息历史
  - [ ] 上下文管理
  - [ ] 流式响应
- [ ] 聊天 API
  - [ ] 创建会话接口
  - [ ] 发送消息接口
  - [ ] 流式消息接口（SSE）
  - [ ] 历史记录接口

**前端任务**
- [ ] 灵感激发页
  - [ ] 聊天界面（ChatGPT 风格）
  - [ ] 模式选择器
  - [ ] Markdown 渲染
  - [ ] 流式打字效果
- [ ] 对话管理
  - [ ] 会话列表
  - [ ] 历史记录
  - [ ] 会话标题管理

**提示词模板**：
- [ ] chat/creative
- [ ] chat/building
- [ ] chat/character
- [ ] chat/general

**交付标准**：
- 可以进行多轮对话
- 支持 4 种对话模式
- 对话历史可保存

---

#### Sprint 10: 智能对话激发灵感（第 10 周）

**后端任务**
- [ ] 聊天服务
  - [ ] 会话管理
  - [ ] 消息历史
  - [ ] 上下文管理
  - [ ] 流式响应
- [ ] 聊天 API
  - [ ] 创建会话接口
  - [ ] 发送消息接口
  - [ ] 流式消息接口（SSE）
  - [ ] 历史记录接口

**前端任务**
- [ ] 灵感激发页
  - [ ] 聊天界面（ChatGPT 风格）
  - [ ] 模式选择器
  - [ ] Markdown 渲染
  - [ ] 流式打字效果
- [ ] 对话管理
  - [ ] 会话列表
  - [ ] 历史记录
  - [ ] 会话标题管理

**提示词模板**：
- [ ] chat/creative
- [ ] chat/building
- [ ] chat/character
- [ ] chat/general

**交付标准**：
- 可以进行多轮对话
- 支持 4 种对话模式
- 对话历史可保存

---

#### Sprint 11: 智能写作助手（第 11 周）

**后端任务**
- [ ] 写作辅助服务
  - [ ] 文本润色
  - [ ] 文本扩写
  - [ ] 灵感建议
- [ ] 写作 API
  - [ ] 润色接口
  - [ ] 扩写接口
  - [ ] 建议接口

**前端任务**
- [ ] 写作助手侧边栏
  - [ ] 抽屉式面板
  - [ ] 三个 Tab（润色/扩写/灵感）
  - [ ] 选项配置
  - [ ] 对比查看
  - [ ] 一键应用

**提示词模板**：
- [ ] polish/vivid
- [ ] polish/environment
- [ ] polish/character
- [ ] expand/300
- [ ] expand/500
- [ ] expand/comprehensive
- [ ] suggest/next

**交付标准**：
- 可以润色选中文本
- 可以扩写文本
- 可以获取灵感建议

---

#### Sprint 11: 智能写作助手（第 11 周）

**后端任务**
- [ ] 写作辅助服务
  - [ ] 文本润色
  - [ ] 文本扩写
  - [ ] 灵感建议
- [ ] 写作 API
  - [ ] 润色接口
  - [ ] 扩写接口
  - [ ] 建议接口

**前端任务**
- [ ] 写作助手侧边栏
  - [ ] 抽屉式面板
  - [ ] 三个 Tab（润色/扩写/灵感）
  - [ ] 选项配置
  - [ ] 对比查看
  - [ ] 一键应用

**提示词模板**：
- [ ] polish/vivid
- [ ] polish/environment
- [ ] polish/character
- [ ] expand/300
- [ ] expand/500
- [ ] expand/comprehensive
- [ ] suggest/next

**交付标准**：
- 可以润色选中文本
- 可以扩写文本
- 可以获取灵感建议

---

#### Sprint 12: AI 专家审阅（第 12 周）

**后端任务**
- [ ] 审阅服务
  - [ ] 综合评分
  - [ ] 优点分析
  - [ ] 问题诊断
  - [ ] 市场预测
- [ ] 审阅 API
  - [ ] 开始审阅接口
  - [ ] 查询记录接口
  - [ ] 审阅历史

**前端任务**
- [ ] 审阅面板
  - [ ] 审阅触发按钮
  - [ ] 进度展示
  - [ ] 评分雷达图
  - [ ] 优点/问题列表
  - [ ] 修改建议

**提示词模板**：
- [ ] review/overall
- [ ] review/highlights
- [ ] review/issues
- [ ] review/suggestions
- [ ] review/prediction

**交付标准**：
- 可以 AI 审阅小说
- 展示多维度评分
- 提供修改建议

---

#### Sprint 12: AI 专家审阅（第 12 周）

**后端任务**
- [ ] 审阅服务
  - [ ] 综合评分
  - [ ] 优点分析
  - [ ] 问题诊断
  - [ ] 市场预测
- [ ] 审阅 API
  - [ ] 开始审阅接口
  - [ ] 查询记录接口
  - [ ] 审阅历史

**前端任务**
- [ ] 审阅面板
  - [ ] 审阅触发按钮
  - [ ] 进度展示
  - [ ] 评分雷达图
  - [ ] 优点/问题列表
  - [ ] 修改建议

**提示词模板**：
- [ ] review/overall
- [ ] review/highlights
- [ ] review/issues
- [ ] review/suggestions
- [ ] review/prediction

**交付标准**：
- 可以 AI 审阅小说
- 展示多维度评分
- 提供修改建议

---

#### Sprint 13: 多平台发布（第 13 周）

**后端任务**
- [ ] 发布服务
  - [ ] 平台适配器
  - [ ] 格式转换
  - [ ] 批量发布
  - [ ] 进度追踪
- [ ] 平台 API
  - [ ] 平台列表接口
  - [ ] 账号绑定接口
  - [ ] 发布任务接口
  - [ ] 任务状态接口

**前端任务**
- [ ] 发布面板
  - [ ] 平台选择
  - [ ] 账号管理
  - [ ] 发布配置
  - [ ] 进度追踪
  - [ ] 发布历史

**交付标准**：
- 可以绑定平台账号
- 可以一键发布草稿箱
- 可以追踪发布状态

---

#### Sprint 13: 多平台发布（第 13 周）

**后端任务**
- [ ] 发布服务
  - [ ] 平台适配器
  - [ ] 格式转换
  - [ ] 批量发布
  - [ ] 进度追踪
- [ ] 平台 API
  - [ ] 平台列表接口
  - [ ] 账号绑定接口
  - [ ] 发布任务接口
  - [ ] 任务状态接口

**前端任务**
- [ ] 发布面板
  - [ ] 平台选择
  - [ ] 账号管理
  - [ ] 发布配置
  - [ ] 进度追踪
  - [ ] 发布历史

**交付标准**：
- 可以绑定平台账号
- 可以一键发布草稿箱
- 可以追踪发布状态

---

#### Sprint 14: 数据备份与恢复（第 14 周）

**后端任务**
- [ ] 备份服务
  - [ ] 数据导出
  - [ ] 数据导入
  - [ ] 增量备份
- [ ] 备份 API
  - [ ] 导出接口
  - [ ] 导入接口
  - [ ] 备份历史

**前端任务**
- [ ] 数据管理页
  - [ ] 导出所有数据
  - [ ] 导入数据
  - [ ] 备份历史
  - [ ] 定时备份设置

**交付标准**：
- 可以导出用户所有数据
- 可以导入备份数据
- 支持定时自动备份

---

## 📱 第四阶段：锦上添花

**目标**：增强体验，提供增值功能

### 预估时间：3-4 周

#### Sprint 16-17: 推广内容生成

**后端任务**
- [ ] 切片生成服务
- [ ] 社交内容生成服务
  - [ ] 小红书风格
  - [ ] 微信公众号
  - [ ] 视频脚本
  - [ ] 微博文案
- [ ] 推广 API

**前端任务**
- [ ] 推广工具页
  - [ ] 切片生成器
  - [ ] 社交内容生成
  - [ ] 内容预览
  - [ ] 一键复制

**交付标准**：
- 可以生成小说切片
- 可以生成推广文案
- 支持多平台格式

---

#### Sprint 18-19: 创意拼装器 + 热门分析

**后端任务**
- [ ] 创意卡片服务
- [ ] 热门数据爬取
- [ ] 趋势分析服务
- [ ] 相关 API

**前端任务**
- [ ] 创意拼装器
  - [ ] 卡片展示
  - [ ] 随机组合
  - [ ] 收藏管理
- [ ] 热门分析页
  - [ ] 趋势图表
  - [ ] 题材建议

**交付标准**：
- 可以随机组合创意
- 可以查看热门趋势
- 可以收藏创意

---

#### Sprint 20: 协作功能（可选）

**后端任务**
- [ ] 协作服务
- [ ] 权限管理
- [ ] 评论系统
- [ ] 版本控制

**前端任务**
- [ ] 协作面板
- [ ] 评论组件
- [ ] 版本历史
- [ ] 权限设置

---

## 🗓️ 开发时间线

```
Week 1-6:    ████████████  MVP (第一阶段)
Week 7-9:    ██████       基础完善 (第二阶段)
Week 10-14:  ████████████  差异化功能 (第三阶段)
Week 15-19:  ████████     增值功能 (第四阶段)
              └───────┘ 优化迭代 (持续)
```

---

## 📋 功能检查清单（按阶段）

### 第一阶段：MVP (Week 1-6)

**Week 1: 基础框架 + 项目管理**
- [ ] 设备 ID 管理
- [ ] 创建项目
- [ ] 项目列表
- [ ] 删除项目

**Week 2: 架构生成**
- [ ] 配置 LLM API
- [ ] 生成核心种子
- [ ] 生成角色体系
- [ ] 生成世界观
- [ ] 生成情节架构
- [ ] 生成角色状态

**Week 3: 大纲生成**
- [ ] 生成章节大纲
- [ ] 分块生成（长篇）
- [ ] 解析章节信息
- [ ] 编辑保存大纲

**Week 4: 章节写作**
- [ ] 章节列表
- [ ] AI 生成草稿
- [ ] 手动编辑
- [ ] 保存章节
- [ ] 定稿（更新摘要）
- [ ] 扩写章节

**Week 5: 导出功能**
- [ ] 导出 TXT
- [ ] 导出 Markdown

**Week 6: 设置 + 优化**
- [ ] API 配置
- [ ] 模型配置
- [ ] 主题切换
- [ ] 错误处理
- [ ] 加载状态

### 第二阶段：基础完善 (Week 7-9)

**Week 7: 关系图谱**
- [ ] 生成图谱
- [ ] 查看快照
- [ ] 节点详情
- [ ] 导出图谱

**Week 8: 错误检测**
- [ ] 错别字检测
- [ ] 逻辑检测
- [ ] 批量修正

**Week 9: 部署**
- [ ] Docker 配置
- [ ] 生产部署
- [ ] 性能优化

### 第三阶段：差异化 (Week 10-14)

**Week 10: 智能对话**
- [ ] 聊天界面
- [ ] 多轮对话
- [ ] 对话模式

**Week 11: 写作助手**
- [ ] 润色功能
- [ ] 扩写功能
- [ ] 灵感建议

**Week 12: AI 审阅**
- [ ] 质量评分
- [ ] 优缺点分析
- [ ] 市场预测

**Week 13: 多平台发布**
- [ ] 平台绑定
- [ ] 自动发布
- [ ] 进度追踪

**Week 14: 数据备份**
- [ ] 数据导出
- [ ] 数据导入

### 第四阶段：增值 (Week 15-19)

**Week 15-16: 推广生成**
- [ ] 切片生成
- [ ] 社交内容

**Week 17-18: 创意工具**
- [ ] 创意拼装
- [ ] 热门分析

**Week 19: 协作**
- [ ] 评论功能
- [ ] 版本控制

---

## 📊 每周交付物

| 周 | 可演示功能 | 验收标准 |
|----|-----------|---------|
| 1 | 项目管理 | 可以创建和管理项目 |
| 2 | 架构生成 | 可以生成完整小说架构 |
| 3 | 大纲生成 | 可以生成章节大纲 |
| 4 | 章节写作 | 可以写完完整一章小说 |
| 5 | 导出功能 | 可以导出 TXT/MD |
| 6 | 设置 + 主题 | 可以配置 API 和切换主题 |
| 7 | 关系图谱 | 可以生成和查看角色关系 |
| 8 | 错误检测 | 可以检测和修正错误 |
| 9 | 部署 | 可以线上访问 |
| 10 | 智能对话 | 可以与 AI 对话激发灵感 |
| 11 | 写作助手 | 可以润色和扩写文本 |
| 12 | AI 审阅 | 可以获得 AI 审阅报告 |
| 13 | 多平台发布 | 可以发布到多平台 |
| 14 | 数据备份 | 可以导出导入数据 |

---

## 🎯 成功标准

### MVP (Week 6)
- ✅ 竞品核心功能 100% 复刻
- ✅ 可以完成完整创作流程
- ✅ 基本体验良好

### 完整版 (Week 14)
- ✅ 竞品功能 + 差异化功能
- ✅ 写作效率提升 50%+
- ✅ 可正式上线运营

### 增强版 (Week 19)
- ✅ 全面超越竞品
- ✅ 完整的创作工具链

---

**文档创建时间**: 2026-02-27
**项目代号**: X-Novel
**开发模式**: 敏捷开发（2 周一个 Sprint）
